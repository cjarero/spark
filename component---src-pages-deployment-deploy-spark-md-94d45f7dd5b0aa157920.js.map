{"version":3,"sources":["webpack:///./src/pages/Deployment/Deploy_spark.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","isMDXComponent"],"mappings":"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","file":"component---src-pages-deployment-deploy-spark-md-94d45f7dd5b0aa157920.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/spark/spark/docs/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n  return <div {...props} />;\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n    <p>{`This page describes how to deploy Spark from the source code onto a Windows machine, either virtual or physical. The instructions are based on Windows Server 2012.`}</p>\n    <h1 {...{\n      \"id\": \"install-prerequisites\"\n    }}>{`Install prerequisites`}</h1>\n    <p>{`Install the following prerequisites.`}</p>\n    <p>{`Please make sure to install IIS first, and ASP.Net 4.6 later. IIS comes with ASP.Net 4.5, and if you do 4.6 first, the IIS installation will break 4.6.`}</p>\n    <h2 {...{\n      \"id\": \"install-internet-information-server-iis\"\n    }}>{`Install Internet Information Server (IIS)`}</h2>\n    <p>{`If you do not already have a recent version of IIS (7 or 8), install it.`}</p>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Open Server Manager > Dashboard`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Click 'Add roled and features'`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Select 'Web Server (IIS)'`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Make sure to include Management Tools > Management Service\nYou need this if you want to enable `}\n        <a {...{\n          \"href\": \"http://www.iis.net/learn/publish/using-web-deploy/introduction-to-web-deploy\",\n          \"parentName\": \"li\"\n        }}>{`Web Deploy`}</a>\n        {` for non-administrators.`}</li>\n\n    </ol>\n    <h2 {...{\n      \"id\": \"install-web-deploy\"\n    }}>{`Install Web Deploy`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Download the `}\n        <a {...{\n          \"href\": \"https://www.microsoft.com/web/downloads/platform.aspx\",\n          \"parentName\": \"li\"\n        }}>{`Web Platform Installer`}</a>\n        {` and run it (wpilauncher.exe).`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Select 'WebDeploy 3.6 for Hosting Servers'`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Install`}</li>\n\n    </ol>\n    <p>{`Read `}\n      <a {...{\n        \"href\": \"https://www.iis.net/learn/install/installing-publishing-technologies/installing-and-configuring-web-deploy-on-iis-80-or-later\",\n        \"parentName\": \"p\"\n      }}>{`more info`}</a>\n      {` about Web Deploy, especially for configuring Web Deploy for non-administrators.`}</p>\n    <h2 {...{\n      \"id\": \"install-aspnet-46\"\n    }}>{`Install ASP.NET 4.6`}</h2>\n    <p>{`If you do not already have it installed, install ASP.NET 4.6 (version 4.5 is not enough).`}</p>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Download it from `}\n        <a {...{\n          \"href\": \"http://www.microsoft.com/en-us/download/details.aspx?id=48130\",\n          \"parentName\": \"li\"\n        }}>{`Microsoft`}</a>\n        {`.`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>{`Install it by running the just downloaded NDP46-KB3045560-Web.exe.`}</li>\n\n    </ol>\n    <h2 {...{\n      \"id\": \"install-mongodb\"\n    }}>{`Install MongoDB`}</h2>\n    <p>{`Spark uses MongoDB for storage. Install it as a service. These instructions are based on the `}\n      <a {...{\n        \"href\": \"https://docs.mongodb.com/v3.0/tutorial/install-mongodb-on-windows/\",\n        \"parentName\": \"p\"\n      }}>{`MongoDB documentation`}</a>\n      {`.`}</p>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Download `}\n          <a {...{\n            \"href\": \"https://www.mongodb.com/download-center?jmp=nav#community\",\n            \"parentName\": \"p\"\n          }}>{`MongoDB`}</a>\n          {`, choose the Community Edition, 'Windows Server 2008 R2 and later, with SSL support'.`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Run the installer.\nBy default it will be installed in C:\\\\Program Files\\\\MongoDB\\\\Server`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Create directories for the database, log files and configuration of Mongo. For example:`}</p>\n\n\n        <ul {...{\n          \"parentName\": \"li\"\n        }}>\n\n          <li {...{\n            \"parentName\": \"ul\"\n          }}>{`C:\\\\Spark\\\\MongoDb\\\\Data`}</li>\n\n\n          <li {...{\n            \"parentName\": \"ul\"\n          }}>{`C:\\\\Spark\\\\MongoDb\\\\Log`}</li>\n\n\n          <li {...{\n            \"parentName\": \"ul\"\n          }}>{`C:\\\\Spark\\\\MongoDb\\\\Config`}</li>\n\n        </ul>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Create a configuration file for MongoDb in the Config directory, name it SparkMongoDB.cfg and add the following to it (adjust to your previously created directories). Please note the indentation: it is relevant (MongoDB uses YAML for this configuration file).`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Run the command below in a Command Window, as Administrator. It will register MongoDB as a Windows Service.`}</p>\n\n      </li>\n\n    </ol>\n    <h1 {...{\n      \"id\": \"opening-ports\"\n    }}>{`Opening Ports`}</h1>\n    <p>{`If you want to deploy Spark with Web Deploy from within Visual Studio to this machine, you will have to open the relevant ports for it for inbound traffic:`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`http (80)`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`https (443)`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`WebDeploy (8172)`}</li>\n\n    </ul>\n    <p>{`Depending on your network configuration you may need to open 8172 locally for outbound traffic.`}</p>\n    <p>{`If you want to manage the MongoDB database remotely, you also have to open:`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`27017`}</li>\n\n    </ul>\n    <p>{`Please take precautions when you do this (refer to MongoDB documentation for further information).`}</p>\n    <ul>\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Configure MongoDB security`}</li>\n\n\n      <li {...{\n        \"parentName\": \"ul\"\n      }}>{`Start MongoDB in secure mode`}</li>\n\n    </ul>\n    <h1 {...{\n      \"id\": \"deploy-spark\"\n    }}>{`Deploy Spark`}</h1>\n    <h2 {...{\n      \"id\": \"by-web-deploy\"\n    }}>{`By Web Deploy`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Open Spark.sln in Visual Studio`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Choose Build | Publish Spark`}</p>\n\n\n        <ol {...{\n          \"parentName\": \"li\"\n        }}>\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>\n\n            <p {...{\n              \"parentName\": \"li\"\n            }}>{`On the Profile tab, create a new profile for this Virtual Machine:`}</p>\n\n          </li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>\n\n            <p {...{\n              \"parentName\": \"li\"\n            }}>{`Publish target 'Custom' > choose a name (something that refers to this machine)`}</p>\n\n          </li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>\n\n            <p {...{\n              \"parentName\": \"li\"\n            }}>{`Connection`}</p>\n\n\n            <ol {...{\n              \"parentName\": \"li\"\n            }}>\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Publish method: Web Deploy`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Server: the ip address of your Virtual Machine`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Site name: Default Web Site/spark`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`User name: login name for your VM`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Password: matching the User name`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Destination URL: can be left blank`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Validate Connection`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`If the connection does not validate, check with the system administrator if the firewall lets you through.`}</li>\n\n            </ol>\n\n          </li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>\n\n            <p {...{\n              \"parentName\": \"li\"\n            }}>{`Settings`}</p>\n\n\n            <ol {...{\n              \"parentName\": \"li\"\n            }}>\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Configuration: Release`}</li>\n\n            </ol>\n\n          </li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>\n\n            <p {...{\n              \"parentName\": \"li\"\n            }}>{`Publish`}</p>\n\n          </li>\n\n        </ol>\n\n      </li>\n\n    </ol>\n    <h2 {...{\n      \"id\": \"by-web-deploy-package\"\n    }}>{`By Web Deploy Package`}</h2>\n    <ol>\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Open Spark.sln in Visual Studio`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Choose Build | Publish Spark`}</p>\n\n\n        <ol {...{\n          \"parentName\": \"li\"\n        }}>\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>{`On the Profile tab, create a new profile.`}</li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>{`Publish target 'Custom' > choose a name (it may or may not refer to this specific machine, since you can deploy the package to other machines as well).`}</li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>{`Connection`}\n            <ol {...{\n              \"parentName\": \"li\"\n            }}>\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Publish method: Web Deploy Package`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Package location: choose as suitable directory on your disk.`}</li>\n\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Site name: Default Web Site/spark`}</li>\n\n            </ol></li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>{`Settings`}\n            <ol {...{\n              \"parentName\": \"li\"\n            }}>\n\n              <li {...{\n                \"parentName\": \"ol\"\n              }}>{`Configuration: Release`}</li>\n\n            </ol></li>\n\n\n          <li {...{\n            \"parentName\": \"ol\"\n          }}>{`Publish`}</li>\n\n        </ol>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Connect Remote Desktop Manager to your VM, and select the option to make your local disks available to the VM.`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`In the VM, open Windows Explorer and copy the deployment package to a local directory on the VM.`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Read (from the deployment directory) the Spark.deploy-readme.txt.`}</p>\n\n      </li>\n\n\n      <li {...{\n        \"parentName\": \"ol\"\n      }}>\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Start a Command Window as Administrator and run (from the deployment directory)`}</p>\n\n\n        <p {...{\n          \"parentName\": \"li\"\n        }}>{`Spark.deploy.cmd /Y`}</p>\n\n      </li>\n\n    </ol>\n    <h1 {...{\n      \"id\": \"check-spark\"\n    }}>{`Check Spark`}</h1>\n    <p>{`Open a browser on the server and try http://localhost/spark. If that works, try the same from your own machine, with http://ip-address/spark`}</p>\n    <h1 {...{\n      \"id\": \"faq\"\n    }}>{`FAQ`}</h1>\n    <h2 {...{\n      \"id\": \"bad-module\"\n    }}>{`Bad Module`}</h2>\n    <p>{`When I first try to open Spark in the browser I get this error:`}</p>\n    <p>{`Handler \"ExtensionlessUrlHandler-Integrated-4.0\" has a bad module \"ManagedPipelineHandler\" in its module list`}</p>\n    <p>{`Something must have gone wrong with installing ASP.Net in IIS. I (Christiaan) had this and solved it by running in a Command Window (as Administrator):`}</p>\n    <p>{`dism.exe /Online /Enable-Feature /all /FeatureName:IIS-ASPNET45`}</p>\n    <p>{`Source of this fix: `}\n      <a {...{\n        \"href\": \"https://www.microsoft.com/en-us/download/details.aspx?id=44989\",\n        \"parentName\": \"p\"\n      }}>{`https://www.microsoft.com/en-us/download/details.aspx?id=44989`}</a></p>\n\n  </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}